<!doctype html>
<html lang="es">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ADM-013 - Notificaciones Automáticas</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>

  <div class="container">

    <header>
      <div class="brand">
        <div class="logo">nhs</div>
        <div>
          <h1>Notificaciones</h1>
          <p>Alertas automáticas del sistema</p>
        </div>
      </div>
    </header>

    <main>

      <section class="form-section">
        <h2>Centro de notificaciones</h2>

        <div class="btn-group">
          <button id="msgNuevo" class="btn-primary">simular mensaje nuevo</button>
          <button id="pagoNuevo" class="btn-primary">simular pago realizado</button>
          <button id="adminNuevo" class="btn-primary">simular proceso administrativo</button>
        </div>

        <label class="switch-label">
          <input type="checkbox" id="toggleNotificaciones" checked>
          activar / desactivar notificaciones
        </label>

        <div id="notificaciones" class="lista-mensajes"></div>

      </section>

    </main>

  </div>

  <script>
    let notificacionesActivas = true;
    const lista = document.getElementById('notificaciones');
    const toggle = document.getElementById('toggleNotificaciones');

    toggle.addEventListener('change', function () {
      notificacionesActivas = toggle.checked;

      if (!notificacionesActivas) {
        mostrarMensaje("las notificaciones han sido desactivadas.", "err");
      } else {
        mostrarMensaje("las notificaciones han sido activadas.", "ok");
      }
    });

    function agregarNotificacion(texto, tipo) {
      if (!notificacionesActivas) return;

      const card = document.createElement('div');
      card.className = "mensaje-card";

      const fecha = new Date().toLocaleString();

      card.innerHTML = `
        <strong>${tipo}</strong><br>
        <span class="fecha">${fecha}</span>
        <p>${texto}</p>
      `;

      lista.prepend(card);
    }

    function mostrarMensaje(texto, tipo) {
      const msg = document.createElement("div");
      msg.className = "msg " + (tipo === "ok" ? "ok" : "err");
      msg.textContent = texto;

      lista.prepend(msg);

      setTimeout(() => msg.remove(), 3000);
    }

    document.getElementById('msgNuevo').addEventListener('click', function () {
      agregarNotificacion(
        "tiene un mensaje nuevo sin leer.",
        "notificación de mensaje"
      );
    });

    document.getElementById('pagoNuevo').addEventListener('click', function () {
      agregarNotificacion(
        "se registró un pago correctamente.",
        "notificación de pago"
      );
    });

    document.getElementById('adminNuevo').addEventListener('click', function () {
      agregarNotificacion(
        "un proceso administrativo ha cambiado de estado.",
        "notificación administrativa"
      );
    });
  </script>

</body>

</html>
