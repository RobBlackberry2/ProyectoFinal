<!doctype html>
<html lang="es">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ADM-016 - Gestión de secciones</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>

  <div class="container">

    <header>
      <div class="brand">
        <div class="logo">nhs</div>
        <div>
          <h1>Gestión de secciones</h1>
          <p>Administración de grupos por nivel académico</p>
        </div>
      </div>
    </header>

    <main>

      <section class="form-section">
        <h2>Crear o actualizar sección</h2>

        <label for="nivel">nivel académico</label>
        <select id="nivel">
          <option value="">seleccione nivel</option>
          <option value="primaria">primaria</option>
          <option value="secundaria">secundaria</option>
          <option value="bachillerato">bachillerato</option>
        </select>

        <label for="seccion">sección</label>
        <input type="text" id="seccion" placeholder="ej: 7-1">

        <label for="estudiantes">estudiantes (ids separados por coma)</label>
        <input type="text" id="estudiantes" placeholder="ej: 102, 104, 108">

        <button id="btnCrear" class="btn-primary">crear sección</button>
        <button id="btnActualizar" class="btn-secondary">actualizar sección</button>

        <h2 style="margin-top:40px;">visualizar secciones</h2>

        <button id="btnVerTodo" class="btn-primary">ver todas las secciones</button>

        <label for="buscarSeccion">buscar sección específica</label>
        <input type="text" id="buscarSeccion" placeholder="ej: 7-1">

        <button id="btnBuscar" class="btn-secondary">ver sección</button>

        <button id="btnEliminar" class="btn-danger">eliminar sección</button>

        <div id="msg" class="msg" style="display:none; margin-top:20px;"></div>

        <div id="resultado" class="resultado" style="display:none; margin-top:20px;"></div>

      </section>

    </main>

  </div>

  <script>

    let secciones = {}; 


    const nivel = document.getElementById('nivel');
    const seccion = document.getElementById('seccion');
    const estudiantes = document.getElementById('estudiantes');

    const btnCrear = document.getElementById('btnCrear');
    const btnActualizar = document.getElementById('btnActualizar');
    const btnVerTodo = document.getElementById('btnVerTodo');
    const btnBuscar = document.getElementById('btnBuscar');
    const btnEliminar = document.getElementById('btnEliminar');

    const buscarSeccion = document.getElementById('buscarSeccion');
    const msg = document.getElementById('msg');
    const resultado = document.getElementById('resultado');

    function mostrar(tipo, texto) {
      msg.className = "msg " + (tipo === "ok" ? "ok" : "err");
      msg.textContent = texto;
      msg.style.display = "block";
    }

    function mostrarResultado(texto) {
      resultado.style.display = "block";
      resultado.textContent = texto;
    }

    btnCrear.addEventListener('click', function () {
      if (!nivel.value || !seccion.value || !estudiantes.value) {
        mostrar("err", "todos los campos son obligatorios.");
        return;
      }

      const lista = estudiantes.value.split(",").map(e => e.trim());

      if (secciones[seccion.value]) {
        mostrar("err", "la sección ya existe. use actualizar.");
        return;
      }

      secciones[seccion.value] = {
        nivel: nivel.value,
        estudiantes: lista
      };

      mostrar("ok", "sección creada y estudiantes asignados.");
    });

    btnActualizar.addEventListener('click', function () {
      if (!nivel.value || !seccion.value || !estudiantes.value) {
        mostrar("err", "complete todos los campos para actualizar la sección.");
        return;
      }

      if (!secciones[seccion.value]) {
        mostrar("err", "la sección no existe. no se puede actualizar.");
        return;
      }

      const lista = estudiantes.value.split(",").map(e => e.trim());

      secciones[seccion.value] = {
        nivel: nivel.value,
        estudiantes: lista
      };

      mostrar("ok", "sección actualizada correctamente.");
    });

    btnVerTodo.addEventListener('click', function () {
      if (Object.keys(secciones).length === 0) {
        mostrarResultado("no hay secciones registradas.");
        return;
      }

      let texto = "secciones registradas:\n\n";

      for (let s in secciones) {
        texto += `• ${s} (${secciones[s].nivel}) - estudiantes: ${secciones[s].estudiantes.join(", ")}\n`;
      }

      mostrarResultado(texto);
    });

    btnBuscar.addEventListener('click', function () {
      if (!buscarSeccion.value) {
        mostrar("err", "debe ingresar una sección para buscar.");
        return;
      }

      const s = buscarSeccion.value;

      if (!secciones[s]) {
        mostrarResultado("la sección no existe.");
        return;
      }

      const datos = secciones[s];

      mostrarResultado(`sección ${s}\n• nivel: ${datos.nivel}\n• estudiantes: ${datos.estudiantes.join(", ")}`);
    });

    btnEliminar.addEventListener('click', function () {
      if (!buscarSeccion.value) {
        mostrar("err", "ingrese la sección que desea eliminar.");
        return;
      }

      const s = buscarSeccion.value;

      if (!secciones[s]) {
        mostrar("err", "la sección no existe. no se puede eliminar.");
        return;
      }

      delete secciones[s];

      mostrar("ok", "la sección fue eliminada y los estudiantes quedaron sin asignación.");
      resultado.style.display = "none";
    });

  </script>

</body>

</html>
